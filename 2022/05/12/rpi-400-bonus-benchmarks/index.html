<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#F15A29">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="not://files v3.0" href="https://notfiles.xyz/feed.xml">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>RasPi 400 bonus benchmarks | not://files v3.0</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="RasPi 400 bonus benchmarks" />
<meta name="author" content="Calle Englund" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I didn’t quite finish the bonus benchmarks, so for the sake of completeness, here we go. The missing ones for the RasPi 400." />
<meta property="og:description" content="I didn’t quite finish the bonus benchmarks, so for the sake of completeness, here we go. The missing ones for the RasPi 400." />
<link rel="canonical" href="https://notfiles.xyz/2022/05/12/rpi-400-bonus-benchmarks/" />
<meta property="og:url" content="https://notfiles.xyz/2022/05/12/rpi-400-bonus-benchmarks/" />
<meta property="og:site_name" content="not://files v3.0" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-12T18:34:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="RasPi 400 bonus benchmarks" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Calle Englund"},"dateModified":"2022-05-12T18:34:00+00:00","datePublished":"2022-05-12T18:34:00+00:00","description":"I didn’t quite finish the bonus benchmarks, so for the sake of completeness, here we go. The missing ones for the RasPi 400.","headline":"RasPi 400 bonus benchmarks","mainEntityOfPage":{"@type":"WebPage","@id":"https://notfiles.xyz/2022/05/12/rpi-400-bonus-benchmarks/"},"url":"https://notfiles.xyz/2022/05/12/rpi-400-bonus-benchmarks/"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css" integrity="sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs" crossorigin="anonymous">

  <!-- The loading of KaTeX is deferred to speed up page rendering -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js" integrity="sha384-ljao5I1l+8KYFXG7LNEA7DyaFvuvSCmedUf6Y6JI7LJqiu8q5dEivP2nDdFH31V4" crossorigin="anonymous"></script>

  <!-- To automatically render math in text elements, include the auto-render extension: -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
</head>
<body><header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">not://files v3.0</a><nav class="site-nav" id="site-navigation" aria-label="Menu">
  <label for="site-menu-toggle" class="menu-icon" aria-label="Menu">
    <i class="fas fa-bars"></i>
  </label>
  <input id="site-menu-toggle" class="menu-toggle" type="checkbox"/><ul id="site-menu" class="menu">
    <li class="menu-item">
      <a class="page-link" href="/posts/">
          All Posts
        </a></li>
    <li class="menu-item">
      <a class="page-link" href="/archive/">
          Archives
        </a></li>
    <li class="menu-item">
      <a class="page-link" href="/category/">
          Categories
        </a></li>
    <li class="menu-item">
      <a class="page-link" href="/tag/">
          Tags
        </a></li>
</ul>
</nav>
</div>
</header>
<section class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">RasPi 400 bonus benchmarks</h1>
    <div class="post-meta"><time datetime="2022-05-12T18:34:00+00:00" itemprop="datePublished">Thursday, 2022-05-12</time>
       in
    <a href="/category/discord/"
       title="Discord">discord</a>
   about
    <a href="/tag/raytracerchallenge/" title="">
      #raytracerchallenge</a>,
  
    <a href="/tag/raytracing/" title="">
      #raytracing</a>,
  
    <a href="/tag/ruby/" title="coding in Ruby">
      #ruby</a>
  </div><div class="post-meta">
        Follow-up to
          <a href="/2022/05/11/ruby-raytracer-on-m1/">Ruby raytracer on M1</a>

        <blockquote>
        While doing something else than I was planning to, I accedentally came back to
the raytracer I once wrote in Ruby, and decided that the important thing just
now is to benchmark my MacBook Pro M1 against those old results. I guess
this will actually be Ruby 3 on M1 vs Ruby 2 on i7, because time happened.

        </blockquote>
      </div></header>

  <section class="post-content" itemprop="articleBody">
    <p>I didn’t quite finish the bonus benchmarks, so for the sake of completeness,
here we go. The missing ones for the <em>RasPi 400</em>.</p>

<h3 id="hard-shadows">Hard shadows</h3>

<p>The Raspi only got a chance to show off with the heaviest of the benchmarks,
so let’s see how it does in the lower end of teapot image quality.</p>

<h6 id="raspberry-pi-400-oc-22ghz-single-threaded">Raspberry Pi 400 OC 2.2GHz (single threaded)</h6>

<p>Single threaded performance still tracks at about the same ratio of <em>1/9 M1</em>.</p>

<div class="language-pry highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">[1] pry(#&lt;GlisteningRuby::DSL::Scene&gt;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">render</span> <span class="n">verbose</span><span class="ss">:true</span>
<span class="go"> Setup time: 1.375927773 s
Render time: 852.156157512 s
 Total time: 853.532085285 s
</span></code></pre></div></div>

<h6 id="raspberry-pi-400-oc-22ghz-multi-threaded">Raspberry Pi 400 OC 2.2GHz (multi-threaded)</h6>

<p>This one would seem a bit unfair, because the <em>RasPi 400</em> only gets 4 threads
to do the work, instead of 8 threads for the other ones.</p>

<div class="language-pry highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">[2] pry(#&lt;GlisteningRuby::DSL::Scene&gt;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">render</span> <span class="n">verbose</span><span class="ss">:true</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span><span class="mi">4</span>
<span class="go"> Setup time: 1.379623305 s
Render time: 292.012566677 s
 Total time: 293.392189982 s
</span></code></pre></div></div>

<p>The huge falloff in performance for those last 4 threads shows pretty clearly
here. The <em>RasPi 400</em> performance/thread scales pretty well at <em>3/4</em>, given
the huge overhead of the threaded renderer, but the <em>M1</em> only did <em>4/8</em>, and
the <em>i7</em> was even worse with <em>3/8</em>.</p>

<p>Still, <em>4x M1</em> is more than <em>3x RasPi 400</em>, so the total
performance ratio when using every single bit of crunch there is, is less
than <em>1/10 M1</em>.</p>

<p>More interesting is that the <em>RasPi 400</em> did the soft-shadows render at only
<em>19x</em> the time for hard-shadows, but the <em>M1</em> took more than <em>21x</em> the
time. The passive thermal design of the <em>RasPi 400</em> continues to amaze me,
especially given the long history of overheated pies.</p>

  </section>
</article>
<section class="post-list"><h2>Previous related</h2><article class="post-item">
  <header class="post-header">
    <h3 class="post-link">
      <a href="/2019/12/08/messy-shadows/" >
        Messy shadows
      </a>
    </h3>
    <div class="post-meta">Sunday, 2019-12-08 in
    <a href="/category/devlog/"
       title="Development Logs">devlog</a>
   about
    <a href="/tag/devember/" title="participation in Devember">
      #devember</a>,
  
    <a href="/tag/devember2019/" title="Devember 2019 ray tracer">
      #devember2019</a>,
  
    <a href="/tag/hourofcode/" title="coding for one hour per day">
      #hourofcode</a>,
  
    <a href="/tag/swift/" title="coding in Swift">
      #swift</a>,
  
    <a href="/tag/raytracing/" title="">
      #raytracing</a>
  
    </div>
  </header>
  <section class="post-excerpt">
    <blockquote>
      Apparently, I messed up some more vector algebra. Ray / surface hits currently record the event in surface space, which works just fine for shading a unit sphere still positioned at origin. When we transform things around, and try to cast the secondary shadow rays, it becomes painfully obvious that surface space and world space no longer coincide.

    </blockquote>
  </section>
</article>
<article class="post-item">
  <header class="post-header">
    <h3 class="post-link">
      <a href="/2019/12/07/all-the-things/" >
        All the things
      </a>
    </h3>
    <div class="post-meta">Saturday, 2019-12-07 in
    <a href="/category/devlog/"
       title="Development Logs">devlog</a>
   about
    <a href="/tag/devember/" title="participation in Devember">
      #devember</a>,
  
    <a href="/tag/devember2019/" title="Devember 2019 ray tracer">
      #devember2019</a>,
  
    <a href="/tag/hourofcode/" title="coding for one hour per day">
      #hourofcode</a>,
  
    <a href="/tag/swift/" title="coding in Swift">
      #swift</a>,
  
    <a href="/tag/raytracing/" title="">
      #raytracing</a>
  
    </div>
  </header>
  <section class="post-excerpt">
    <blockquote>
      One limitation so far was that there could only be one surface in a scene. To get past that, we add the Group meta-surface, that contains a number of surfaces, and intersects with rays on their behalf. To make this actually useful, surfaces also need transforms to translate them out of their shared origin.

    </blockquote>
  </section>
</article>
<article class="post-item">
  <header class="post-header">
    <h3 class="post-link">
      <a href="/2019/12/06/light-and-magic/" >
        Light and Magic
      </a>
    </h3>
    <div class="post-meta">Friday, 2019-12-06 in
    <a href="/category/devlog/"
       title="Development Logs">devlog</a>
   about
    <a href="/tag/devember/" title="participation in Devember">
      #devember</a>,
  
    <a href="/tag/devember2019/" title="Devember 2019 ray tracer">
      #devember2019</a>,
  
    <a href="/tag/hourofcode/" title="coding for one hour per day">
      #hourofcode</a>,
  
    <a href="/tag/swift/" title="coding in Swift">
      #swift</a>,
  
    <a href="/tag/raytracing/" title="">
      #raytracing</a>
  
    </div>
  </header>
  <section class="post-excerpt">
    <blockquote>
      The next natural step after getting basic shading to work is to have actual light sources, that can be tinted and positioned in the scene.

    </blockquote>
  </section>
</article>
</section>

      </div>
    </section><footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Calle Englund</li>
          <li><a href="mailto:calle@notfiles.xyz">calle@notfiles.xyz</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list"><li title="GitHub">
            <a rel="me" href="https://github.com/notCalle">
              <i class="icon fab fa-github"></i>
              notCalle
            </a>
          </li><li title="Mastodon">
            <a rel="me" href="https://mastodon.social/@notCalle">
              <i class="icon fab fa-mastodon"></i>
              @notCalle@mastodon.social
            </a>
          </li><li title="Twitter">
            <a rel="me" href="https://twitter.com/@notCalle">
              <i class="icon fab fa-twitter"></i>
              @notCalle
            </a>
          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        Random development ramblings, maybe.

      </div>
    </div>

  </div>

</footer>
</body>
</html>
